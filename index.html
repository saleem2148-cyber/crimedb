<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Crime Database</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css"> </head>
<body>
    <h2>Add Crime Record</h2>
    <form id="crimeForm">
        <input type="text" id="accusedName" placeholder="Accused Name" required>
        <input type="text" id="offence" placeholder="Offence (e.g., BNS 302)" required>
        <input type="date" id="incidentDate" required>
        <button type="submit">Save Record</button>
    </form>

    <hr>
    <h2>Recent Records</h2>
    <div id="recordList">Loading...</div>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
      import { getFirestore, collection, addDoc, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

      // PASTE YOUR CONFIG HERE
      const firebaseConfig = { /* ... your config ... */ };

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      // Save Data
      document.getElementById('crimeForm').onsubmit = async (e) => {
          e.preventDefault();
          await addDoc(collection(db, "crimes"), {
              name: document.getElementById('accusedName').value,
              offence: document.getElementById('offence').value,
              date: document.getElementById('incidentDate').value,
              timestamp: new Date()
          });
          location.reload(); // Refresh to see new data
      };

      // Load Data
      const q = query(collection(db, "crimes"), orderBy("timestamp", "desc"));
      const querySnapshot = await getDocs(q);
      let html = "";
      querySnapshot.forEach((doc) => {
          const data = doc.data();
          html += `<p><strong>${data.name}</strong> - ${data.offence} (${data.date})</p>`;
      });
      document.getElementById('recordList').innerHTML = html;
    </script>
</body>
</html>